# K-WingX Admin - API Strategy

This project uses a **Contract-First** architecture with a switchable API layer.

## API Modes

Controlled by `VITE_API_MODE` in `.env`:

- `mock` (Default): Uses `src/services/mock/mockServer.ts` for standalone development.
- `real`: Connects to the backend specified in `VITE_API_BASE_URL`.

## OpenAPI Integration

We use `openapi-typescript` to generate types from the backend Swagger.

### Regenerate Types
When the backend evolves, run:
```bash
npm run gen:api
```
This updates `src/types/openapi.ts`. **Do not edit this file manually.**

## Gateway Ready

To switch from direct backend to an API Gateway (e.g., Ocelot), update these env vars:

```env
# Direct Backend
VITE_API_BASE_URL=http://localhost:8080
VITE_API_ADMIN_PREFIX=/api/{version}/admin

# API Gateway
VITE_API_BASE_URL=http://api-gateway:9000
VITE_API_ADMIN_PREFIX=/admin-api/{version}
```

## Security & SEO

- **NOINDEX**: All admin pages are tagged with `noindex, nofollow` via the `<SEO />` component.
- **Auth**: Tokens are handled via `apiClient` interceptors and stored in `localStorage`. They are never logged or exposed in URLs.
